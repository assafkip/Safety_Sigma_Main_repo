---
title: Delta – v1.0 → v1.1
doc_type: spec
authority: advisory
version: v1.1
effective_date: 2025-09-04
owner: you@company.com
links:
- /docs/specs/v1.1.md
- /docs/policy/guardrails.md
- /docs/ir/schema.md
- /docs/tests/golden_cases.md
- /docs/validation/contract.md
- /docs/product/overview.md
---

# Delta – v1.0 → v1.1

## Purpose
Clarify what changed between v1.0 and v1.1, why those changes were required, and how they satisfy the governance spine (V-001..V-005), golden tests (G-001..G-003, G-010), and success metrics (T1/T2/T3). See the full plan in **/docs/specs/v1.1.md**.

---

## What Changed (Summary)
1. **Backtest & Confidence (NEW, MUST).**
   - Added offline harness to emit TP, FP, FPR, TPR, sample_size per rule.
   - Composite confidence computed from measured metrics; formula + params logged in audit.
   - **Why:** Unblocks promotion gate by providing evidence for safety decisions.

2. **Mandatory Metadata Enforcement (UPGRADED, MUST).**
   - Required: severity_label, rule_owner, detection_type, SLA, staleness_days, log_field_targets.
   - Build hard-fails if any required field is missing; promotion disabled until complete.
   - **Why:** Enables accountable operations and defensible routing.

3. **Gate Transparency (UPGRADED, MUST).**
   - Per-rule outcomes for V-001..V-005 printed inline; bundle "pass" only if all promoted rules pass all gates.
   - **Why:** Eliminates ambiguity between dashboards and details; prevents accidental promotion.

4. **Adapter Targets (EXPANDED, MUST).**
   - Emit Snowflake SQL and JSON configs for Sift/Unit21 (plus existing targets as applicable).
   - Require compiled=0 errors for the bundle.
   - **Why:** Aligns outputs to real deployment engines; preserves "no hand-editing required."

5. **Exact Indicator Preservation (RE-ENFORCED, MUST).**
   - Golden tests run on IR and compiled outputs (e.g., `$1,998.88`, `VOID 2000`, `wa.me/...`).
   - Fail-fast on any normalization or drift.
   - **Why:** Protects zero-inference, cite-or-omit posture.

6. **Report UX (IMPROVED, SHOULD).**
   - HTML-first → PDF, fixed columns, monospace for snippets, collapsible JSON.
   - **Why:** Reduces operational risk from unreadable tables; clearer gate outcomes.

7. **Turnaround Evidence (ADDED, SHOULD).**
   - Log ingest→IR→rules→report timestamps; publish AVG/P95.
   - **Why:** Demonstrates T2 < 6h with data.

---

## Mapping to Governance & Tests

### Validation Gates (V-001..V-005)
- **V-001 Indicator preservation:** Enforced by golden tests on IR + compiled artifacts.
- **V-002 Category grounding:** G-010 diff==∅; block on any unsourced category.
- **V-003 Audit completeness:** Audit trail now includes metrics, formula string+params, dataset hashes, timestamps, per-gate decisions.
- **V-004 Practitioner readiness:** Requires syntactic validity *and* populated backtest metrics (no confidence=0.000).
- **V-005 Exec guarantees:** Promotion blocked unless required metadata present; gates and evidence visible in the report.

### Golden Tests
- **G-001 Amount exactness** (`$1,998.88`)
- **G-002 Memo preservation** (`VOID 2000`)
- **G-003 Link literal** (`wa.me/...`)
- **G-010 Category source check** (diff==∅)
> All run on both IR and compiled outputs; any failure blocks the bundle.

### Success Metrics (T1/T2/T3)
- **T1 ≥95% preservation** — proven via golden tests and fail-fast policy.
- **T2 <6h turnaround** — evidenced via audit timestamps + report summary.
- **T3 = 0 unsourced categories** — enforced by category diff gate.

---

## What "Good" Looks Like (Exit Criteria Recap)
1) Metrics populated for ≥80% of rules; no rule shows confidence=0.000.  
2) No missing required metadata; build fails otherwise.  
3) Per-rule gate outcomes visible; "Ready Deploy" only for all-gates-pass.  
4) Snowflake/Sift/Unit21 compile with 0 errors.  
5) Turnaround evidence shows <6h on the demo corpus.  
6) Golden tests pass on both IR and compiled outputs.

---

## Out of Scope
- Inventing intel or categories (no inference).  
- Case management UI; prevention pipelines beyond rule compilation.  
- Replacing customer risk engines or policy processes.

---

## Notes for Reviewers
- **Analyst:** Confirm span fidelity and evidence-bounded expansions; ignore promotion until metrics+metadata are present.
- **Engineer:** Verify syntax (adapters), metrics presence, and metadata completeness; treat this as a compiler acceptance test.
- **Leader:** Check gate behavior and auditability; promotion should block when data is missing—by design.